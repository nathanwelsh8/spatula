 {% extends 'spatula/base.html' %}
{% load staticfiles %}
{% load spatulaApp_template_tags %} 

{% block title_block %}
	 {{ recipe.name }}
{% endblock %}

{% block css_block %}
	<!-- Stylesheet for recipe page -->
    <link rel="stylesheet" href="{% static 'css/recipe.css' %}">
	<!-- Required for star rating system -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
{% endblock %}


{% block meta_block %}
	<meta name="keywords" content="recipe, cooking, social, spatula, spatu-la,recipes, spatula!,{{recipe.name}},{{recipe.postedby}}">
    <meta name="description" content="{{recipe.description}}">
	<meta property="og:title" content="Learn how to make {{recipe.name}}" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="{% url 'spatulaApp:register' %}" />
	<meta property="og:image" content="{% static 'images/spatula.png' %}" />
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="@nathanwelsh8">
	<meta name="twitter:title" content="Learn how to make {{recipe.name}}}">
	<meta name="twitter:description" content="{{recipe.description}}}'">	
{% endblock %}

{% block js_block %}
	<!-- JS for recipe page -->
	<script src="{% static 'js/recipe.js' %}"
	type="text/javascript" charset="utf-8"></script>


{% endblock %}



{% block body_block %}

<div class = "row">
	<div class = "col-12 col-lg-8">
	{% with images|getKeyImgList:recipe.name as image %}
	{% if image %}
	<!-- Bootstap image carousel (slideshow) with controls -->
	<div id="sideshow" class="carousel slide" data-ride="carousel">
		<div class="carousel-inner">
			{% for i in image %}
				<!-- Set the first image to active -->
				{%if i == image.0 %}
					<div class="carousel-item active">
						<img class="d-block w-100" src="..{{MEDIA_URL}}{{i}}" alt="First slide">
					</div>
				{% else %}
					<div class="carousel-item">
						<img class="d-block w-100" src="..{{MEDIA_URL}}{{i}}" alt="Second slide">
					</div>
				{% endif %}
			{% endfor %}
		</div>
		
		<!-- Carousel controls -->
		<a class="carousel-control-prev" href="#sideshow" role="button" data-slide="prev">
			<span class="carousel-control-prev-icon" aria-hidden="true"></span>
			<span class="sr-only">Previous</span>
	    </a>
		<a class="carousel-control-next" href="#sideshow" role="button" data-slide="next">
			<span class="carousel-control-next-icon" aria-hidden="true"></span>
			<span class="sr-only">Next</span>
		</a>
	</div>
	{% endif %}
	{% endwith %} 
	<!-- if user submitted the recipe show an editable view of the page else display normal page --> 
	{% if canEdit %}
		{% include 'spatula/edit_recipe.html'%}
	{% else %}
		{% include 'spatula/non_edit_recipe_main.html' %}
	{% endif %}
</div>
{% endblock %}