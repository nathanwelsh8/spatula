{% extends 'spatula/base.html' %}
{% load staticfiles %}

{% load spatulaApp_template_tags %} 

{% block css_block %}
	<!-- Index style sheet -->
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
{% endblock %}

{% block js_block %}
	<!--Index javascript -->
	<script src="{% static 'js/index.js' %}"
	type="text/javascript" charset="utf-8"></script>
	
	<!--Internal javascript required due to dependence on django template tags -->
	{% if runPreSearch %}
		 <script>
			 $(document).ready(function(){
				 sendRequest(getSearchText(),getSortType(), getDietType(), getCategories());
			  });
		 </script>
	{% endif %}
{% endblock %}

{% block meta_block %}
    <meta name="keywords" content="spatula recipes,spatula! recipes,learn to cook,spatula! learn,spatula! learn to cook,spatula learn,spatula learn to cook,recipe,cooking,social,spatula,spatu-la,recipes,spatula!,new recipes, exciting recipes,cook new food">
    <meta name="description" content="Learn to cook new recipes and share your own food ideas with others.">
    <meta property="og:title" content="Browse recipes on Spatula!" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="{% url 'spatulaApp:register' %}" />
	<meta property="og:image" content="{% static 'images/spatula.png' %}" />
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="@nathanwelsh8">
	<meta name="twitter:title" content="Browse food creations and recipes on Spatula!">
	<meta name="twitter:description" content="Browse and learn new cooking recipes; Share your own food ideas with others">	

{% endblock %}

{% block title_block %}
{% endblock %}

{% block body_block %}
	<div class = "row">
		<!-- Index page results sub-header and filter button for mobile view-->
		<div class = "col-xs-12 col-lg-12">
			<h3 id="results">Results</h3>
			<button class="btn" id = "filterButton" onclick = "showFilters()">filters</button>
		</div>
		<!-- Sidebar that shows filters for results section of index page
			Display inline with results for desktop view, above for mobile/tablet view
		-->
		<div id="sidebar" class = "col-xs-12  col-lg-2">
            <div id="sidebarcontainer">
                <!--Get categories and diet_choices from database and display
                    Allows page to be easily updated if any categories/diet_choices added
                -->
                {% if categories %}
                    <div id="categories">
                        {% for category in categories %}
                            <input type="checkbox" name="{{ category }}" checked>
                            <label for="{{ category }}"> {{ category }}</label><br>
                        {% endfor %}
                    </div>
                {% endif  %}

                <br>

                {% if diet_choices %}
                    <div id="meat">
                        {% for type in diet_choices %}
                        <!-- Type is now a list, type.0 = value ; type.1 = name -->
                            <input type="checkbox" name="{{ type.0 }}" checked>
                            <img src="{{ MEDIA_URL }}images/{{type.0}}_diet.png" class="sidebarmeat">
                            <label for="{{ type.1 }}">{{type.1}}</label><br>
                        {% endfor %}
                    </div>
                {% endif %}

                <br>

                <!--Sorting parameters for the results section of index page -->
                <div id="sort">
                    <input type="radio" name="sort" checked value="rating">
                    <label for="category1"> Rating</label><br>

                    <input type="radio" name="sort" value="popularity">
                    <label for="category2"> Popularity</label><br>

                    <input type="radio" name="sort" value="difficulty">
                    <label for="category3"> Difficulty</label><br>

                    <input type="radio" name="sort" value="cost">
                    <label for="category4"> Cost</label><br>
                </div>
            </div>
		</div>
		
		<!--Results section of index page 
			Display inline with filters on desktop, take full width on mobile and tablets
		-->
		<div id="recipies" class = "col-xs-12 col-lg-9">
			<!-- The search results & default results to display
				 are generated by searchResultsAPI -->
			{% include 'spatulaSearchAPI/results2.html' %}
		</div>
		
		
	</div>

{% endblock %}
